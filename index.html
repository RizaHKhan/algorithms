<img src="/img/free-trial.jpg" class="background-logo" />
<div class="right-panel-card" id="panel-card" style="text-align: center; ">
	<div style="font-size: .9em;font-family: latobold;text-align: center; ">Involved in another board or organization that needs OnBoard?</div><button style="border: none;background: #368dde;color: #fff;border-radius: 9px;height: 56px;width: 266px;font-size: .8em;margin-top: 36px;cursor: pointer; " onclick="showNewTrial()">Request a Free Trial</button>
</div>
<div style="position: fixed;top: 0;right: 0;left: 0;bottom: 0;background-color: rgba(0, 0, 0, 0.4);display:none; " id="dialog-mask"></div>
<div style="position: fixed;top: 50%;right: 0;left: 50%;bottom: 0;transform: translate(-50%, -50%);background: white;border-radius: 11px;box-shadow: 0 6px 20px 0 rgba(0, 0, 0, 0.2), 0 4px 8px 0 rgba(0, 0, 0, 0.2);padding: 72px;height: 680px;max-width: 650px;width: 60%;display:none;overflow: auto; " id="trial-dialog">
	<div id="trial-setup">
		<div style="font-size: 28px;font-family: latobold; ">Request a free 30 day trial</div>
		<div style="font-size: 24px;font-family: latolight;margin-top: 24px;margin-bottom: 36px; ">Our trial team is ready to get your 30-day free trial set up. Now, all of the organizations that you care about can experience the power of OnBoard. </div>
		<div class="new-input-container"><input type="text" id="userName" name="userName" placeholder="Your Full Name" style="border: 2px solid #e5e5ea" onchange="clearTrialValidation()">
			<div style="color: red;font-size: 14px;padding-top: 3px; display: none" id="requiredFieldsWarning-userName">Your Full Name is required.</div>
		</div>
		<div class="new-input-container"><input type="text" id="userEmail" name="userEmail" placeholder="Your Email" style="border: 2px solid #e5e5ea" onchange="clearTrialValidation()">
			<div style="color: #ff3b30;font-size: 14px;padding-top: 3px; display: none" id="requiredFieldsWarning-userEmail">Your Email is required.</div>
		</div>
		<div style="font-size: 20px; font-family: latolight; margin-top: 35px; margin-bottom: 15px">New Trial Organization Information</div>
		<div class="new-input-container"><input type="text" id="userOrgName" name="userOrgName" placeholder="Organization Full Name" style="border: 2px solid #e5e5ea" onchange="clearTrialValidation()">
			<div style="color: #ff3b30;font-size: 14px;padding-top: 3px; display: none" id="requiredFieldsWarning-userOrgName">Your Organization Full Name is required.</div>
		</div>
		<div class="new-input-container"><input type="text" id="userOrgURL" name="userOrgURL" placeholder="Organization URL" style="border: 2px solid #e5e5ea" onchange="clearTrialValidation()">
			<div style="color: #ff3b30;font-size: 14px;padding-top: 3px; display: none" id="requiredFieldsWarning-userOrgURL">Your Organization URL is required.</div>
		</div>
		<div class="new-input-container"><input type="text" id="userOrgContactName" name="userOrgContactName" placeholder="Key Contact Name (optional)" style="border: 2px solid #e5e5ea"> </div>
		<div class="new-input-container"><input type="text" id="userOrgContactEmail" name="userOrgContactEmail" placeholder="Key Contact Email (optional)" style="border: 2px solid #e5e5ea"> </div>
		<div style="float: right; "><button style="border: 0;cursor: pointer;background: #efeff4;color: #808080;font-size: 16px;height: 37px;width: 85px;border-radius: 6px; " onclick="dismiss()">Cancel</button><button style="border: 0;cursor: pointer;background: #368dde;color: #fff;font-size: 16px;height: 37px;width: 173px;border-radius: 6px;margin-left: 12px; " onclick="submitTrialRequest()">Submit Trial Request</button> </div>
	</div>
	<div id="trial-sucess" style="display: none">
		<div style="font-size:28px; font-family:latobold;">You"re all set</div>
		<div style="font-size: 24px;font-family: latolight;margin-top: 15px;">Your trial organization will be created in the next 48 hours and weâ€™ll be in touch soon to make sure you have everything you need for a successful trial.</div>
		<div style="font-size: 24px;font-family: latolight;margin-top: 15px;">If you need anything in the meantime, feel free to email us at <a href="mailto:requests@passageways.com">requests@passageways.com</a></div>
		<div style="float: right;margin-top: 36px; "><button style="border: 0;cursor: pointer;background: #368dde;color: #fff;font-size: 16px;height: 37px;width: 85px;border-radius: 6px; " onclick="dismiss()">Dismiss</button> </div>
	</div>
	<div id="trial-failure" style="display: none">
		<div style="font-size:28px; font-family:latobold;">Something went wrong</div>
		<div style="font-size: 24px;font-family: latolight;margin-top: 15px;">Your trial request failed please try again.</div>
		<div style="font-size: 24px;font-family: latolight;margin-top: 15px;">If you need anything in the meantime, feel free to email us at <a href="mailto:requests@passageways.com">requests@passageways.com</a></div>
		<div style="float: right;margin-top: 36px; "><button style="border: 0;background: #368dde;color: #fff;font-size: 16px;height: 37px;width: 85px;border-radius: 6px; " onclick="dismiss()">Dismiss</button> </div>
	</div>
</div>
<script src="https://www.google.com/recaptcha/api.js?render=6Lcf7vIUAAAAAEyOGaUjOqpha0A2L3bYUgkGg1Cq"></script>
<script>
	var trialRequestSubmitting = false;
	var recaptchaLoaded = false;
	var intervalWindow = window.setInterval(function() {
		if (grecaptcha) {
			window.clearInterval(intervalWindow);
			grecaptcha.ready(function() {
				recaptchaLoaded = true;
			});
		}
	}, 1000);

	function showNewTrial() {
		$("#dialog-mask").show();
		$("#trial-dialog").show();
	}

	function dismiss() {
		$("#dialog-mask").hide();
		$("#trial-dialog").hide();
		$("#trial-setup").show();
		$("#trial-sucess").hide();
		$("#trial-failure").hide();
		$("#trial-dialog").height(680);
		$(".new-input-container input").css("border", "2px solid #e5e5ea");
		$("[id^=requiredFieldsWarning-").hide();
		$("#userOrgName").val("");
		$("#userName").val("");
		$("#userEmail").val("");
		$("#userOrgURL").val("");
		$("#userOrgContactName").val("");
		$("#userOrgContactEmail").val("");
	}

	function clearTrialValidation() {
		$(".new-input-container input").css("border", "2px solid #e5e5ea");
		$("[id^=requiredFieldsWarning-").hide();
	}

	function submitTrialRequest() {
		if (!recaptchaLoaded) {
			window.setTimeout(function() {
				submitTrialRequest();
			}, 1000);
			return;
		}
		if (trialRequestSubmitting) {
			return;
		}
		if (!$("#userName").val()) {
			$("#requiredFieldsWarning-userName").prev("input").css("border", "2px solid #ff3b30");
			$("#requiredFieldsWarning-userName").show();
			return;
		}
		if (!$("#userEmail").val()) {
			$("#requiredFieldsWarning-userEmail").prev("input").css("border", "2px solid #ff3b30");
			$("#requiredFieldsWarning-userEmail").show();
			return;
		}
		if (!$("#userOrgName").val()) {
			$("#requiredFieldsWarning-userOrgName").prev("input").css("border", "2px solid #ff3b30");
			$("#requiredFieldsWarning-userOrgName").show();
			return;
		}
		if (!$("#userOrgURL").val()) {
			$("#requiredFieldsWarning-userOrgURL").prev("input").css("border", "2px solid #ff3b30");
			$("#requiredFieldsWarning-userOrgURL").show();
			return;
		}
		trialRequestSubmitting = true;
		grecaptcha.execute("6Lcf7vIUAAAAAEyOGaUjOqpha0A2L3bYUgkGg1Cq", {
			action: "homepage"
		}).then(function(token) {
			var orgIds = [];
			var orgIdString = "";
			var fullName = $("#userName").val();
			var email = $("#userEmail").val();
			var orgName = $("#userOrgName").val();
			var orgUrl = $("#userOrgURL").val();
			var contactName = $("#userOrgContactName").val();
			var contactEmail = $("#userOrgContactEmail").val();
			var requestUrl = "/FormCompletion";
			var method = "POST";
			$.ajax(requestUrl, {
				method: method,
				contentType: "application/json",
				headers: {
					"x-ob-requestsrc": "web"
				},
				data: JSON.stringify({
					formName: "TrialRequest",
					recaptchaToken: token,
					formData: {
						fullName: fullName,
						email: email,
						orgName: orgName,
						orgUrl: orgUrl,
						contactName: contactName,
						contactEmail: contactEmail
					}
				})
			}).done(function(data) {
				$("#trial-setup").hide();
				$("#trial-sucess").show();
				$("#trial-dialog").height(285);
				$("#userOrgName").val("");
				$("#userName").val("");
				$("#userEmail").val("");
				$("#userOrgURL").val("");
				$("#userOrgContactName").val("");
				$("#userOrgContactEmail").val("");
				trialRequestSubmitting = false;
			}).fail(function(xhr, textStatus, errorThrown) {
				$("#trial-setup").hide();
				$("#trial-failure").show();
				$("#trial-dialog").height(225);
				$("#userOrgName").val("");
				$("#userName").val("");
				$("#userEmail").val("");
				$("#userOrgURL").val("");
				$("#userOrgContactName").val("");
				$("#userOrgContactEmail").val("");
				trialRequestSubmitting = false;
			});
		});
	}
</script>
